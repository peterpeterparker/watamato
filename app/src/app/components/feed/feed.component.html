<ng-container *ngIf="loaded; else feedLoading;">
  <main>
    <section dragula="bag" [attr.status]="'incoming'">
      <ion-label class="column-title">Incoming</ion-label>

      <ion-card *ngFor="let flat of (flats$ | async);" mode="md" (click)="open(flat)" [attr.key]="flat.id">
        <img [src]="flat.data.image_url" [class.ronorp]="flat.data.source === 'ronorp'"/>

        <ion-badge>Ronorp</ion-badge>

        <ion-card-header>
          <ion-card-subtitle>{{toDateObj(flat.data.published_at) | date: 'short'}}</ion-card-subtitle>
          <ion-card-title>{{flat.data.title}}</ion-card-title>
        </ion-card-header>

        <ion-card-content>
          <p>{{flat.data.rooms}} rooms</p>
          <p>{{flat.data.location}}</p>
          <p>{{flat.data.price | currency:'CHF':'symbol':'4.2-2'}}</p>
        </ion-card-content>
      </ion-card>
    </section>

    <section dragula="bag" [attr.status]="'dislike'">
      <ion-label class="column-title">Dislike</ion-label>
    </section>

    <section dragula="bag" [attr.status]="'sightseeing'">
      <ion-label class="column-title">Sightseeing</ion-label>
    </section>

    <section dragula="bag" [attr.status]="'applied'">
      <ion-label class="column-title">Applied for</ion-label>
    </section>

    <section dragula="bag" [attr.status]="'rejected'">
      <ion-label class="column-title">Rejected</ion-label>
    </section>

    <section dragula="bag" [attr.status]="'winner'">
      <ion-label class="column-title">Winner</ion-label>
    </section>
  </main>

  <ion-infinite-scroll (ionInfinite)="findNext($event)">
    <ion-infinite-scroll-content>
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ng-container>

<ng-template #feedLoading>
  <main>
    Initializing your feed
  </main>
</ng-template>

